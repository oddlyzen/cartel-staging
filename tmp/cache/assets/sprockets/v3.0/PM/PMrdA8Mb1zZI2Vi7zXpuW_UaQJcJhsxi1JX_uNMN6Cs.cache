I"Ê(function() {
  Controllers['my/companies'] = function() {
    var MyCompanies;
    return MyCompanies = (function() {
      var hide_tag, initialize_tag_list, name_autocomplete, show_tag, tag_visibility;

      function MyCompanies() {}

      MyCompanies.prototype["new"] = function(action) {
        prepare_country_city_selection('select[data-selectize-country=company]');
        name_autocomplete();
        initialize_tag_list();
        return tag_visibility();
      };

      MyCompanies.prototype.edit = function(action) {
        prepare_country_city_selection('select[data-selectize-country=company]');
        initialize_tag_list();
        return tag_visibility();
      };

      MyCompanies.prototype.create = function(action) {
        return this["new"](action);
      };

      name_autocomplete = function() {
        return $('select[data-selectize-company=true]').selectize({
          create: function(input) {
            return {
              value: input,
              text: input
            };
          },
          render: {
            option_create: function(data, escape) {
              return '<div class="create">This is a new company. Click to add <strong>' + escape(data.input) + '</strong>&hellip;</div>';
            }
          }
        });
      };

      initialize_tag_list = function() {
        return $('select[data-selectize-organisation-type]').selectize({
          delimiter: ',',
          render: {
            option_create: function(data, escape) {
              return '<div class="create">This is a Organization Type. Pending approval from admin. Click to add <strong>' + escape(data.input) + '</strong>&hellip;</div>';
            }
          },
          create: function(input, callback) {
            var klass, url;
            klass = this.$input.data('klass');
            url = this.$input.data('url');
            $.ajax({
              url: url,
              type: 'POST',
              data: {
                name: input,
                klass: klass
              },
              success: function(tag) {
                return callback({
                  value: tag.id,
                  text: tag.name
                });
              }
            });
          }
        });
      };

      tag_visibility = function() {
        $('.check_boxes input[type="checkbox"]').last().click(function() {
          var other;
          other = $(this);
          if (other.is(':checked')) {
            return show_tag();
          } else {
            return hide_tag();
          }
        });
        if ($('.check_boxes input[type="checkbox"]').last().is(':checked')) {
          return show_tag();
        }
      };

      show_tag = function() {
        return $('.my_company_form_company_organization_type_ids .selectize-input').show();
      };

      hide_tag = function() {
        return $('.my_company_form_company_organization_type_ids .selectize-input').hide();
      };

      return MyCompanies;

    })();
  };

}).call(this);
:ET